<!DOCTYPE html>
<html>

<head>
    <title>RoomNightVendor</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="lib/iview.css">
    <link rel="stylesheet" href="style/main.css">
    <script src='../dist/index.js'></script>
    <script src='lib/vue.min.js'></script>
    <script src='lib/iview.min.js'></script>
</head>

<body>
    <div id="app">
        <Card>
            <p slot="title">
                RoomNightAdmin.updateBaseTokenURI
            </p>
            <i-form 
                label-position="right" 
                :label-width="70"
                :model="dataUpdateBaseTokenURI"
                ref="formUpdateBaseTokenURI">
                <form-item 
                    label="uri" 
                    prop="uri"
                    :rules="{required: true, message: 'Please enter uri', trigger: 'blur'}">
                    <i-input v-model="dataUpdateBaseTokenURI.uri"></i-input>
                </form-item>
                <form-item>
                    <i-button 
                        type="primary" 
                        @click="updateBaseTokenURI()">Submit</i-button>
                </form-item>
            </i-form>
        </Card>
        <Card>
            <p slot="title">
                RoomNightAdmin
            </p>

        </Card>
    </div>
    <script type="text/JavaScript">
        var app = new Vue({
            el: '#app',
            data: {
                message: 'Hello Vue!',
                tripio: null,
                account: '',
                dataUpdateBaseTokenURI: {
                    uri: 'test'
                }
            },
            mounted: function() {

                this.tripio = new Tripio(web3, {
                    env: 'ropsten'
                });

                web3.eth.getAccounts((error, accounts)=> {
                    if (!error) {
                        this.account = accounts[0]
                    }
                });
            },
            methods: {
                updateBaseTokenURI: function() {
                    this.$refs.formUpdateBaseTokenURI.validate((valid) => {
                        if(valid) {
                            var vendor = this.tripio.roomNightAdmin.updateBaseTokenURI(this.dataUpdateBaseTokenURI.uri, {
                                from: this.account
                            });
                        }
                    });
                    
                }
            }
        })
    </script>
</body>

</html>